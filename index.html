<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DocumentCloud Page Embed Test</title>
    <link type="text/css" rel="stylesheet" href="dist/page_embed.css"/>
    <style>
    body {
      margin: 0;
      padding: 1em;
      font: 400 1em/1.6em 'Gotham', 'Proxima Nova', 'Avenir Next', Helvetica, Arial, sans-serif;
    }
    
    h1,
    h2 {
      font-weight: 300;
      line-height: 1.3em;
    }

    .main {
      margin: 0 auto;
      max-width: 960px;
    }

    header,
    section {
      margin-bottom: 3em;
    }

    .col {
      display: inline-block;
      vertical-align: top;
      line-height: 0;
    }
    .col * {
      line-height: 1.6em;
    }

    </style>
  </head>
  <body>
    <div class="main width-target">
      <header>
        <h1>DocumentCloud Page Embed Testbed</h1>
        <p>This page is flexible with a min-width of 320px and a max-width of 960px. The current width is <b class="width">…</b>. Bold pixel counts will update as the window is resized. Below 200px, we show a thumbnail and link. From 200-399px, we show a reduced interface. 400px and above gets the complete experience.</p>
      </header>

      <section class="row">
        <div class="col width-target" style="width:50%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_1"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_1 = new pym.Parent('pym_page_embed_1', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
        <div class="col width-target" style="width:30%;margin-right:2%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_2"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_2 = new pym.Parent('pym_page_embed_2', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
        <div class="col width-target" style="width:15%;">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_3"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_3 = new pym.Parent('pym_page_embed_3', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
      </section>

      <section class="row">
        <div class="col width-target" style="width:31%;margin-right:3%;">
          <h3>Direct <span class="width">…</span></h3>

          <div id="direct_page_embed_1" class="DC-embed"></div>
          <script src="dist/page_embed.js"></script>
          <script>
            DocumentCloud.embed.loadPage("https://www.documentcloud.org/documents/282753-lefler-thesis.json", {
              page: 57,
              container: '#direct_page_embed_1'
            });
          </script>

        </div>
        <div class="col width-target" style="width:31%;margin-right:3%;">
          <h3>Enhanced <span class="width">…</span></h3>

          <div class="DC-embed-stub">
            <p><a href="https://www.documentcloud.org/documents/282753-lefler-thesis.html#document/p57" title="View Lefler Thesis on DocumentCloud">Lefler Thesis</a></p>
            <img src="https://assets.documentcloud.org/documents/282753/pages/lefler-thesis-p57-normal.gif" style="border:1px solid #ccc;box-sizing:border-box;width:100%;max-width:700px;">
          </div>
          <script src="dist/loader.js"></script>

        </div>
        <div class="col width-target" style="width:31%;margin-right:0;">
          <h3>Unenhanced <span class="width">…</span></h3>

          <div>
            <p><a href="https://www.documentcloud.org/documents/282753-lefler-thesis.html#document/p57" title="View Lefler Thesis on DocumentCloud">Lefler Thesis</a></p>
            <img src="https://assets.documentcloud.org/documents/282753/pages/lefler-thesis-p57-normal.gif" style="border:1px solid #ccc;box-sizing:border-box;width:100%;max-width:700px;">
          </div>

        </div>
      </section>

      <section>
        <h2>Pixel-match Document Viewer</h2>
        <p>When the viewport is wide enough, this will display at 702px, which means the page image will be rendered at its native 700px width. Useful for doing pixel-level comparisons with the workspace and Document Viewer.</p>
        <div class="width-target" style="max-width:702px;margin:0 auto">
          <h3 class="width">…</h3>
          <div id="pym_page_embed_5"></div>
          <script src="dist/pym.js"></script>
          <script type="text/javascript">
            var pym_page_embed_5 = new pym.Parent('pym_page_embed_5', 'embed.html?slug=282753-lefler-thesis&page=57', {});
          </script>
        </div>
      </section>

    </div>
    
    <section class="width-target">
      <h2>Full width</h2>
      <h3 class="width">…</h3>
        <div id="pym_page_embed_6"></div>
        <script src="dist/pym.js"></script>
        <script type="text/javascript">
          var pym_page_embed_6 = new pym.Parent('pym_page_embed_6', 'embed.html?slug=282753-lefler-thesis&page=57', {});
        </script>
    </section>

    <script type="text/javascript">
      (function(){
        var $ = DocumentCloud.$;

        // Cache width indicators and their parents so we don't have to do 
        // expensive DOM lookups during `resize`;
        var $widths = $('.width');
        $widths.each(function(){
          $(this).data('target', $(this).closest('.width-target'));
        });

        var updateColWidths = function(){
          $widths.each(function(){
            $(this).text( $(this).data('target').css('width') );
          });
        };
        updateColWidths();

        $(window).on('resize', function() {
          updateColWidths();
        })
      })();
    </script>
  </body>
</html>
