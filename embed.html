<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        margin: 0;
        padding: 0;
      }
    </style>
    <link type="text/css" rel="stylesheet" href="dist/page_embed.css"/>
    <script src="dist/pym.js"></script>
    <script src="dist/page_embed.js"></script>
  </head>
  <body>
    <div id="page_embed" class="DC-embed"></div>
    <script>
      // NB: This is ONLY DURING TESTING and should be removed
      function getParameterByName(name) {
          name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
          var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
              results = regex.exec(location.search);
          return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      }
      var slug = getParameterByName('slug');
      var page = getParameterByName('page');

      if (getParameterByName('childId')) {
        var pymChild = new pym.Child();
      }

      DocumentCloud.embed.loadPage("https://www.documentcloud.org/documents/" + slug + ".json", {
        page: page,
        container: '#page_embed',
        pym: pymChild || false
      });

    </script>
  </body>
</html>
